"use client";

import React, { FC, useMemo } from 'react';

interface StockBadgeProps {
  count?: number;
  className?: string;
  title?: string;
  ariaLabel?: string;
}

const StockBadge: FC<StockBadgeProps> = ({ count = 1, className = '', title, ariaLabel }) => {
  const text = useMemo(() => {
    if (typeof count !== 'number' || isNaN(count)) return 'In stock';
    return count === 1 ? '1 in stock' : `${count} in stock`;
  }, [count]);

  return (
    <span
      className={
        `inline-flex items-center gap-1.5 rounded-full bg-green-50 text-green-700 border border-green-200 px-3 py-1 text-xs font-medium shadow-sm ${className}`.trim()
      }
      title={title || text}
      aria-label={ariaLabel || text}
    >
      <svg
        className="h-4 w-4"
        viewBox="0 0 217.73 203.46"
        fill="currentColor"
        aria-hidden="true"
        focusable="false"
      >
        <path d="M217.48,27.12v22.04c-1.65,7.98-5.64,15.66-12.29,20.56-.09.37,3.72,3.6,4.45,4.44,4.07,4.66,6.54,10.54,7.84,16.53v22.04c-1.65,7.98-5.64,15.66-12.29,20.56-.09.37,3.72,3.6,4.45,4.44,4.07,4.66,6.54,10.54,7.84,16.53-.58,6.99.77,15.2,0,22.04-1.52,13.44-14.78,25.99-28.19,27.12l-160.22.02C2.85,199.28-1.47,178.54.48,155.34c.68-8.09,5.83-16.82,12.28-21.63.09-.37-3.72-3.6-4.45-4.44C-.56,119.11-.6,104.64.48,91.76c.5-5.9,3.82-12.91,7.64-17.37.75-.87,4.73-4.33,4.65-4.67C5.94,64.6,1.02,55.83.46,47.27-1.06,24.2,2.75,4.65,28.67,0l161,.05c13.25,1.27,26.31,13.78,27.82,27.07ZM41.92,12.8c-15.32-1.51-27.73,3.09-28.75,20.02-.32,5.32-.31,13.54,1.51,18.45,4.3,11.63,16.24,13.13,27.24,12.21l19.98-25.19-19.98-25.49ZM93.3,12.71h-34.76l19.94,25.62-19.94,25.24h34.76c6.11-8.81,13.63-16.79,19.89-25.58-6.55-8.46-13.73-16.61-19.89-25.28ZM144.16,12.71h-34.33l19.94,25.62-19.94,25.24h34.33c6.11-8.81,13.63-16.79,19.89-25.58-6.55-8.46-13.73-16.61-19.89-25.28ZM185.91,12.71c-8.1-.65-17.03.49-25.22,0l19.94,25.62-19.94,25.24h25.22c11.34,0,18.25-9.71,18.88-20.11.89-14.73-1.28-29.33-18.88-30.75ZM41.92,76.38c-15.32-1.51-27.73,3.09-28.75,20.02-.32,5.32-.31,13.54,1.51,18.45,4.3,11.63,16.24,13.13,27.24,12.21l19.98-25.19-19.98-25.49ZM93.3,76.29h-34.76l19.94,25.62-19.94,25.24h34.76c6.11-8.81,13.63-16.79,19.89-25.58-6.55-8.46-13.73-16.61-19.89-25.28ZM144.16,76.29h-34.33l19.94,25.62-19.94,25.24h34.33c6.11-8.81,13.63-16.79,19.89-25.58-6.55-8.46-13.73-16.61-19.89-25.28ZM185.91,76.29c-8.1-.65-17.03.49-25.22,0l19.94,25.62-19.94,25.24h25.22c11.34,0,18.25-9.71,18.88-20.11.89-14.73-1.28-29.33-18.88-30.75ZM41.92,139.95c-15.32-1.51-27.73,3.09-28.75,20.02-.32,5.32-.31,13.54,1.51,18.45,4.3,11.63,16.24,13.13,27.24,12.21l19.98-25.19-19.98-25.49ZM93.3,139.86h-34.76l19.94,25.62-19.94,25.24h34.76c6.11-8.81,13.63-16.79,19.89-25.58-6.55-8.46-13.73-16.61-19.89-25.28ZM144.16,139.86h-34.33l19.94,25.62-19.94,25.24h34.33c6.11-8.81,13.63-16.79,19.89-25.58-6.55-8.46-13.73-16.61-19.89-25.28ZM185.91,139.86c-8.1-.65-17.03.49-25.22,0l19.94,25.62-19.94,25.24h25.22c11.34,0,18.25-9.71,18.88-20.11.89-14.73-1.28-29.33-18.88-30.75Z" />
      </svg>
      <span>{text}</span>
    </span>
  );
};

export default StockBadge;
